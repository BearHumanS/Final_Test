import "froala-editor/css/froala_editor.pkgd.min.css";
import "froala-editor/css/froala_style.min.css";
import "froala-editor/js/froala_editor.pkgd.min.js";
import "froala-editor/js/languages/ko";
import "froala-editor/js/plugins.pkgd.min.js";
import FroalaEditorComponent from "react-froala-wysiwyg";
/* import Froalaeditor from "froala-editor"; */
import React from "react";
import { froalaEditorStore } from "@/lib/store/store.module";
import { url } from "@/lib/api/cloudinary";

const FroalaSetup = () => {
  const { text, setText } = froalaEditorStore();

  /*   const handleImageUploaded = (response: any, editor: any) => {
    console.log(response);
    const responseData = JSON.parse(response);

    const img_url = responseData.secure_url;
    console.log(img_url);

    editor.image.insert(img_url, false, null, editor.image.get(), response);

    return false;
  }; */

  const config = {
    placeholderText: "내용을 입력하세요.",
    toolbarButtons: {
      moreText: {
        buttons: [
          "bold",
          "italic",
          "underline",
          "strikeThrough",
          "subscript",
          "superscript",
          "fontFamily",
          "fontSize",
          "textColor",
          "backgroundColor",
          "inlineClass",
          "inlineStyle",
          "clearFormatting",
        ],
      },
      moreParagraph: {
        buttons: [
          "alignLeft",
          "alignCenter",
          "alignRight",
          "formatOLSimple",
          "alignJustify",
          "formatOL",
          "formatUL",
          "paragraphFormat",
          "paragraphStyle",
          "lineHeight",
          "outdent",
          "indent",
          "quote",
        ],
      },
      moreRich: {
        buttons: [
          "insertLink",
          "insertImage",
          "insertVideo",
          "insertTable",
          "emoticons",
          "fontAwesome",
          "specialCharacters",
          "embedly",
          "insertFile",
          "insertHR",
        ],
      },

      moreMisc: {
        buttons: [
          "undo",
          "redo",
          "fullscreen",
          "print",
          "getPDF",
          "spellChecker",
          "selectAll",
          "html",
          "help",
        ],
      },
    },
    imageUpload: true,
    imageUploadParam: "file",
    imageUploadParams: {
      upload_preset: "dvmzwc5k",
    },
    imageUploadURL: url,
    imageUploadMethod: "POST",
    imageMaxSize: 4 * 1024 * 1024,
    imageAllowedTypes: ["jpeg", "jpg", "png"],
    language: "ko",
    height: "434",
    width: "100%",
    quickInsertEnabled: false,
    videoInsertButtons: ["videoBack", "|", "videoByURL", "videoUpload"],
    paragraphFormat: {
      N: "Normal",
      heading1: "Heading 1",
      H2: "Heading 2",
    },
    events: {
      "image.uploaded": function (response: any) {
        const jsonResponse = JSON.parse(response);

        // URL 속성을 link 속성으로 변경
        jsonResponse.link = jsonResponse.url;

        console.log(jsonResponse.link);
        console.log(jsonResponse);
        return JSON.stringify(jsonResponse);
      },
      "image.error": function (error: any, response: any) {
        console.log(error); // 에러 로깅
        console.log(response); // 응답 로깅
      },
    },
    requestWithCORS: false,
  };

  // Froalaeditor.DefineIcon("", {
  //   PATH: "",
  // });

  // Froalaeditor.DefineIcon("bold", {
  //   PATH: "M0 1C0 0.446875 0.409635 0 0.916667 0H2.29167H2.75H6.41667C8.44193 0 10.0833 1.79063 10.0833 4C10.0833 4.97812 9.75963 5.87812 9.22396 6.57187C10.2867 7.27187 11 8.54375 11 10C11 12.2094 9.35859 14 7.33333 14H2.75H2.29167H0.916667C0.409635 14 0 13.5531 0 13C0 12.4469 0.409635 12 0.916667 12H1.375V7V2H0.916667C0.409635 2 0 1.55312 0 1ZM6.41667 6C7.42786 6 8.25 5.10312 8.25 4C8.25 2.89687 7.42786 2 6.41667 2H3.20833V6H6.41667ZM3.20833 8V12H7.33333C8.34453 12 9.16667 11.1031 9.16667 10C9.16667 8.89687 8.34453 8 7.33333 8H6.41667H3.20833Z",
  // });

  // Froalaeditor.DefineIcon("italic", {
  //   PATH: "M7 1.71429C7 0.766071 7.78203 0 8.75 0H19.25C20.218 0 21 0.766071 21 1.71429C21 2.6625 20.218 3.42857 19.25 3.42857H16.0398L8.75 20.5714H12.25C13.218 20.5714 14 21.3375 14 22.2857C14 23.2339 13.218 24 12.25 24H1.75C0.782031 24 0 23.2339 0 22.2857C0 21.3375 0.782031 20.5714 1.75 20.5714H4.96016L12.25 3.42857H8.75C7.78203 3.42857 7 2.6625 7 1.71429Z",
  // });

  // Froalaeditor.DefineIcon("underline", {
  //   PATH: "M0.857143 1.71429C0.857143 0.766071 1.62321 0 2.57143 0H7.71429C8.6625 0 9.42857 0.766071 9.42857 1.71429C9.42857 2.6625 8.6625 3.42857 7.71429 3.42857H6.85714V10.2857C6.85714 13.125 9.16071 15.4286 12 15.4286C14.8393 15.4286 17.1429 13.125 17.1429 10.2857V3.42857H16.2857C15.3375 3.42857 14.5714 2.6625 14.5714 1.71429C14.5714 0.766071 15.3375 0 16.2857 0H21.4286C22.3768 0 23.1429 0.766071 23.1429 1.71429C23.1429 2.6625 22.3768 3.42857 21.4286 3.42857H20.5714V10.2857C20.5714 15.0214 16.7357 18.8571 12 18.8571C7.26429 18.8571 3.42857 15.0214 3.42857 10.2857V3.42857H2.57143C1.62321 3.42857 0.857143 2.6625 0.857143 1.71429ZM0 22.2857C0 21.3375 0.766071 20.5714 1.71429 20.5714H22.2857C23.2339 20.5714 24 21.3375 24 22.2857C24 23.2339 23.2339 24 22.2857 24H1.71429C0.766071 24 0 23.2339 0 22.2857Z",
  // });

  // Froalaeditor.DefineIcon("strikeThrough", {
  //   PATH: "M7.56094 5.25101C7.71094 4.44492 8.21719 3.84035 9.14062 3.44199C10.1297 3.02019 11.5688 2.86554 13.2937 3.13736C13.8516 3.2264 15.5813 3.56384 16.1109 3.69975C16.9125 3.91065 17.7328 3.4373 17.9484 2.63589C18.1641 1.83449 17.6859 1.01433 16.8844 0.798748C16.2141 0.620658 14.3719 0.264477 13.7625 0.170745C11.6672 -0.157317 9.62344 -0.0260923 7.96406 0.681584C6.25312 1.41269 4.94531 2.78118 4.59844 4.77298C4.59375 4.8011 4.58906 4.82453 4.58906 4.85265C4.45781 5.97275 4.6125 6.98974 5.0625 7.88019C5.27344 8.30199 5.54063 8.67223 5.84531 9.00029H1.5C0.670312 9.00029 0 9.67047 0 10.5C0 11.3295 0.670312 11.9997 1.5 11.9997H22.5C23.3297 11.9997 24 11.3295 24 10.5C24 9.67047 23.3297 9.00029 22.5 9.00029H12.6609C12.6562 9.00029 12.6469 8.9956 12.6422 8.9956L12.5906 8.98154C10.9031 8.47539 9.53438 8.06297 8.59688 7.43028C8.16094 7.13503 7.89375 6.83977 7.74375 6.53514C7.59844 6.24926 7.5 5.8509 7.56562 5.25101H7.56094ZM16.3547 14.3055C16.4813 14.6101 16.5609 15.046 16.4438 15.7162C16.3031 16.541 15.7969 17.1597 14.8547 17.5627C13.8656 17.9845 12.4312 18.1392 10.7063 17.8673C9.8625 17.7314 8.40469 17.2346 7.21875 16.8316C6.95625 16.7425 6.70313 16.6582 6.47344 16.5785C5.68594 16.3161 4.8375 16.7425 4.575 17.5299C4.3125 18.3172 4.73906 19.1655 5.52656 19.428C5.69531 19.4842 5.89688 19.5545 6.12188 19.6295C7.28906 20.0278 9.10313 20.6465 10.2281 20.8293H10.2375C12.3328 21.1573 14.3766 21.0261 16.0359 20.3184C17.7469 19.5873 19.0547 18.2188 19.4016 16.227C19.5703 15.2428 19.5281 14.3336 19.2563 13.5041H15.7078C16.0359 13.7666 16.2422 14.029 16.3594 14.3102L16.3547 14.3055Z",
  // });

  // Froalaeditor.DefineIcon("moreText", {
  //   PATH: "M13.6071 1.11429C13.3554 0.444643 12.7125 0 12 0C11.2875 0 10.6446 0.444643 10.3929 1.11429L3.09643 20.5714H1.71429C0.766071 20.5714 0 21.3375 0 22.2857C0 23.2339 0.766071 24 1.71429 24H6.85714C7.80536 24 8.57143 23.2339 8.57143 22.2857C8.57143 21.3375 7.80536 20.5714 6.85714 20.5714H6.76071L7.725 18H16.275L17.2393 20.5714H17.1429C16.1946 20.5714 15.4286 21.3375 15.4286 22.2857C15.4286 23.2339 16.1946 24 17.1429 24H22.2857C23.2339 24 24 23.2339 24 22.2857C24 21.3375 23.2339 20.5714 22.2857 20.5714H20.9036L13.6071 1.11429ZM14.9893 14.5714H9.01071L12 6.59464L14.9893 14.5714Z",
  // });

  // Froalaeditor.DefineIcon("subscript", {
  //   PATH: "M1.5 0C0.670313 0 0 0.670313 0 1.5C0 2.32969 0.670313 3 1.5 3H2.21719L6.41719 9L2.21719 15H1.5C0.670313 15 0 15.6703 0 16.5C0 17.3297 0.670313 18 1.5 18H3C3.4875 18 3.94688 17.7609 4.22813 17.3625L8.25 11.6156L12.2719 17.3625C12.5531 17.7656 13.0125 18 13.5 18H15C15.8297 18 16.5 17.3297 16.5 16.5C16.5 15.6703 15.8297 15 15 15H14.2828L10.0828 9L14.2828 3H15C15.8297 3 16.5 2.32969 16.5 1.5C16.5 0.670313 15.8297 0 15 0H13.5C13.0125 0 12.5531 0.239062 12.2719 0.6375L8.25 6.38438L4.22813 0.6375C3.94688 0.239062 3.4875 0 3 0H1.5ZM22.5 12C22.5 11.4797 22.2328 10.9969 21.7875 10.725C21.3422 10.4531 20.7938 10.425 20.3297 10.6594L18.8297 11.4094C18.0891 11.7797 17.7891 12.6797 18.1594 13.4203C18.4219 13.9453 18.9516 14.25 19.5 14.25V18C18.6703 18 18 18.6703 18 19.5C18 20.3297 18.6703 21 19.5 21H21H22.5C23.3297 21 24 20.3297 24 19.5C24 18.6703 23.3297 18 22.5 18V12Z",
  // });

  // Froalaeditor.DefineIcon("superscript", {
  //   PATH: "M22.5 1.49933C22.5 0.979003 22.2328 0.496174 21.7875 0.22429C21.3422 -0.0475946 20.7938 -0.0757206 20.3297 0.158662L18.8297 0.908688C18.0891 1.27901 17.7891 2.17904 18.1594 2.91969C18.4219 3.44471 18.9516 3.74941 19.5 3.74941V7.49954C18.6703 7.49954 18 8.16987 18 8.99959C18 9.82931 18.6703 10.4996 19.5 10.4996H21H22.5C23.3297 10.4996 24 9.82931 24 8.99959C24 8.16987 23.3297 7.49954 22.5 7.49954V1.49933ZM1.5 2.99938C0.670312 2.99938 0 3.66972 0 4.49944C0 5.32915 0.670312 5.99949 1.5 5.99949H2.21719L6.41719 11.9997L2.21719 17.9999H1.5C0.670312 17.9999 0 18.6702 0 19.4999C0 20.3297 0.670312 21 1.5 21H3C3.4875 21 3.94687 20.7609 4.22812 20.3625L8.25 14.6154L12.2719 20.3625C12.5531 20.7656 13.0125 21 13.5 21H15C15.8297 21 16.5 20.3297 16.5 19.4999C16.5 18.6702 15.8297 17.9999 15 17.9999H14.2828L10.0828 11.9997L14.2828 5.99949H15C15.8297 5.99949 16.5 5.32915 16.5 4.49944C16.5 3.66972 15.8297 2.99938 15 2.99938H13.5C13.0125 2.99938 12.5531 3.23846 12.2719 3.63691L8.25 9.38398L4.22812 3.63691C3.94687 3.23846 3.4875 2.99938 3 2.99938H1.5Z",
  // });

  // Froalaeditor.DefineIcon("fontFamily", {
  //   PATH: "M8.50446 0.975C8.3471 0.389062 7.94531 0 7.5 0C7.05469 0 6.6529 0.389062 6.49554 0.975L1.93527 18H1.07143C0.478795 18 0 18.6703 0 19.5C0 20.3297 0.478795 21 1.07143 21H4.28571C4.87835 21 5.35714 20.3297 5.35714 19.5C5.35714 18.6703 4.87835 18 4.28571 18H4.22545L4.82812 15.75H10.1719L10.7746 18H10.7143C10.1217 18 9.64286 18.6703 9.64286 19.5C9.64286 20.3297 10.1217 21 10.7143 21H13.9286C14.5212 21 15 20.3297 15 19.5C15 18.6703 14.5212 18 13.9286 18H13.0647L8.50446 0.975ZM9.3683 12.75H5.6317L7.5 5.77031L9.3683 12.75Z",
  // });

  // Froalaeditor.DefineIcon("fontSize", {
  //   PATH: "M6.23661 0.975C6.12121 0.389062 5.82656 0 5.5 0C5.17344 0 4.87879 0.389062 4.76339 0.975L1.4192 18H0.785714C0.351116 18 0 18.6703 0 19.5C0 20.3297 0.351116 21 0.785714 21H3.14286C3.57746 21 3.92857 20.3297 3.92857 19.5C3.92857 18.6703 3.57746 18 3.14286 18H3.09866L3.54062 15.75H7.45937L7.90134 18H7.85714C7.42254 18 7.07143 18.6703 7.07143 19.5C7.07143 20.3297 7.42254 21 7.85714 21H10.2143C10.6489 21 11 20.3297 11 19.5C11 18.6703 10.6489 18 10.2143 18H9.5808L6.23661 0.975ZM6.87009 12.75H4.12991L5.5 5.77031L6.87009 12.75Z M13.5357 7.65C13.4518 7.25937 13.2375 7 13 7C12.7625 7 12.5482 7.25937 12.4643 7.65L10.0321 19H9.57143C9.25536 19 9 19.4469 9 20C9 20.5531 9.25536 21 9.57143 21H11.2857C11.6018 21 11.8571 20.5531 11.8571 20C11.8571 19.4469 11.6018 19 11.2857 19H11.2536L11.575 17.5H14.425L14.7464 19H14.7143C14.3982 19 14.1429 19.4469 14.1429 20C14.1429 20.5531 14.3982 21 14.7143 21H16.4286C16.7446 21 17 20.5531 17 20C17 19.4469 16.7446 19 16.4286 19H15.9679L13.5357 7.65ZM13.9964 15.5H12.0036L13 10.8469L13.9964 15.5Z",
  // });

  // Froalaeditor.DefineIcon("textColor", {
  //   PATH: "M13.8945 13.5378L20.8815 4.29771L19.589 3.03419L10.1011 9.84177L13.8945 13.5378ZM5.64602 13.7527V10.6712C5.64602 10.0137 5.96361 9.3991 6.50616 9.01231L18.5525 0.361008C18.8789 0.124634 19.2759 0 19.6817 0C20.1845 0 20.6697 0.193397 21.027 0.541512L23.4442 2.89666C23.8015 3.24477 24 3.71323 24 4.20746C24 4.60285 23.8721 4.98965 23.6295 5.30768L14.7502 17.0404C14.3532 17.5691 13.7181 17.8785 13.0476 17.8785H9.88054L8.76016 18.9701C8.20879 19.5073 7.31336 19.5073 6.76199 18.9701L4.52564 16.7912C3.97427 16.254 3.97427 15.3815 4.52564 14.8443L5.64602 13.7527ZM0.308767 20.0402L3.08767 17.3327L6.2018 20.3669L4.83441 21.6992C4.63591 21.8926 4.36684 22 4.08454 22H1.05863C0.471972 22 0 21.5401 0 20.9685V20.7666C0 20.4915 0.110274 20.2293 0.308767 20.0359V20.0402Z",
  // });

  // Froalaeditor.DefineIcon("backgroundColor", {
  //   PATH: "M3.92549 0.441609C3.34221 -0.147203 2.39962 -0.147203 1.81634 0.441609C1.23306 1.03042 1.23306 1.98665 1.81634 2.57547L5.61001 6.4051L1.31239 10.7435C-0.437462 12.5099 -0.437462 15.3739 1.31239 17.1403L6.79524 22.6752C8.54509 24.4416 11.3822 24.4416 13.132 22.6752L22.0166 13.7017C23.3278 12.378 23.3278 10.23 22.0166 8.90638L14.9519 1.77468C13.6406 0.451031 11.5128 0.451031 10.2016 1.77468L7.72383 4.27125L3.92549 0.441609ZM7.72383 8.53896L10.029 10.8659C10.6122 11.4548 11.5595 11.4548 12.1428 10.8659C12.7261 10.2771 12.7261 9.3209 12.1428 8.73209L9.83764 6.4051L12.3154 3.90383C12.4601 3.7578 12.6981 3.7578 12.8427 3.90383L19.9074 11.0355C20.0521 11.1816 20.0521 11.4218 19.9074 11.5678L17.9289 13.5651H3.03424C3.09956 13.3107 3.23022 13.0752 3.4262 12.8773L7.72383 8.53896Z",
  // });

  // /*   Froalaeditor.DefineIcon("inlineClass", {
  //   PATH: "",
  // });

  // Froalaeditor.DefineIcon("inlineStyle", {
  //   PATH: "",
  // }); */

  // Froalaeditor.DefineIcon("clearFormatting", {
  //   PATH: "M1.45519 0.189462C1.06519 -0.114828 0.498952 -0.0443217 0.191457 0.341607C-0.116037 0.727536 -0.0447884 1.28788 0.345205 1.59217L22.5448 18.8105C22.9348 19.1148 23.501 19.0443 23.8085 18.6584C24.116 18.2725 24.0448 17.7121 23.6548 17.4078L13.3387 9.40723L15.0074 3.56263H18.8624L18.6374 4.46066C18.4761 5.09521 18.8661 5.7409 19.5111 5.90047C20.1561 6.06004 20.8048 5.67411 20.9661 5.03584L21.3786 3.39935C21.6598 2.27496 20.8011 1.18768 19.6311 1.18768H14.1037H14.0925H7.66883C6.84384 1.18768 6.12385 1.74431 5.92136 2.53843L5.68511 3.47357L1.45519 0.189462ZM7.75507 5.07666C7.75882 5.06553 7.76257 5.05068 7.76632 5.03955L8.13757 3.56263H12.5137L11.2988 7.82269L7.75507 5.07295V5.07666ZM9.1238 15.4374H7.20008C6.53635 15.4374 6.00011 15.968 6.00011 16.6248C6.00011 17.2817 6.53635 17.8123 7.20008 17.8123H13.2C13.8637 17.8123 14.4 17.2817 14.4 16.6248C14.4 15.968 13.8637 15.4374 13.2 15.4374H11.6175L12.2775 13.1329L10.2338 11.541L9.1238 15.4374Z",
  // });

  // Froalaeditor.DefineIcon("", {
  //   PATH: "",
  // });

  // Froalaeditor.DefineIcon("", {
  //   PATH: "",
  // });

  // Froalaeditor.DefineIcon("", {
  //   PATH: "",
  // });

  // Froalaeditor.DefineIcon("", {
  //   PATH: "",
  // });

  // Froalaeditor.DefineIcon("", {
  //   PATH: "",
  // });

  // Froalaeditor.DefineIcon("", {
  //   PATH: "",
  // });

  // Froalaeditor.DefineIcon("paragraphFormat", {
  //   PATH: "M8.46154 0H11.8462H20.3077C21.2438 0 22 0.766071 22 1.71429C22 2.6625 21.2438 3.42857 20.3077 3.42857H18.6154V22.2857C18.6154 23.2339 17.8591 24 16.9231 24C15.987 24 15.2308 23.2339 15.2308 22.2857V3.42857H13.5385V22.2857C13.5385 23.2339 12.7822 24 11.8462 24C10.9101 24 10.1538 23.2339 10.1538 22.2857V17.1429H8.46154C3.78654 17.1429 0 13.3071 0 8.57143C0 3.83571 3.78654 0 8.46154 0Z",
  // });

  return (
    <FroalaEditorComponent
      tag="textarea"
      config={config}
      model={text}
      onModelChange={setText}
    />
  );
};

export default FroalaSetup;
